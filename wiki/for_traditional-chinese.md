<!--
Meta Description: # Solidity 中的 for 迴圈：用法與範例 ## 簡介 在 Solidity 編程語言中，`for` 迴圈是一種常用的控制結構，旨在重複執行一段程式碼，直到滿足指定條件。它特別適合於在已知次數的情況下進行迴圈操作。 ## 文件說明 `for` 迴圈的基本語法如下： ```solidity ...
Meta Keywords: solidity, total, gas, 初始化, uint
-->

# Solidity 中的 for 迴圈：用法與範例

## 簡介
在 Solidity 編程語言中，`for` 迴圈是一種常用的控制結構，旨在重複執行一段程式碼，直到滿足指定條件。它特別適合於在已知次數的情況下進行迴圈操作。

## 文件說明
`for` 迴圈的基本語法如下：

```solidity
for (初始化; 條件; 更新) {
    // 要執行的程式碼
}
```

### 目的
`for` 迴圈用於在滿足特定條件的情況下重複執行程式碼塊。這在需要遍歷數組或進行多次計算時特別有用。

### 使用方式
在 Solidity 中，`for` 迴圈通常用於：
- 遍歷數組或映射
- 進行重複計算
- 實現某些算法（如排序或搜尋）

### 詳細說明
- **初始化**：這是迴圈開始時執行的程式碼，通常用於定義和設置迴圈變數。
- **條件**：在每次迴圈開始時檢查的條件，如果條件為 `true`，則執行迴圈內的程式碼，否則結束迴圈。
- **更新**：在每次迴圈結束時執行的程式碼，通常用來更新迴圈變數。

## 範例
以下是一個簡單的 `for` 迴圈範例，計算從 1 到 5 的總和：

```solidity
pragma solidity ^0.8.0;

contract SumExample {
    uint public total;

    function calculateSum() public {
        total = 0; // 初始化總和
        for (uint i = 1; i <= 5; i++) {
            total += i; // 將 i 加入總和
        }
    }
}
```

在這個例子中，`for` 迴圈從 1 開始直到 5，每次迴圈將當前的 `i` 值加入 `total` 中。

## 解釋
在使用 `for` 迴圈時，需要注意以下幾點：
- **無限迴圈**：如果條件不正確，可能導致無限迴圈，這會耗盡區塊鏈的 gas。
- **溢出問題**：在處理數字時，需注意數值溢出，Solidity 0.8.0 及以上版本有內建的溢出檢查。
- **Gas 限制**：每個區塊的 gas 限制會影響迴圈的最大執行次數，過多次數的迴圈可能導致交易失敗。

## 一句總結
`for` 迴圈是 Solidity 中用於重複執行程式碼的強大工具，適合在已知次數的情況下進行操作。